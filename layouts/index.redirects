{{- range $page := .Site.Pages -}}
{{- range $alias := $page.Aliases -}}
  {{- if eq $page.Type "archive" -}}
    {{- path.Join "artifact" $alias | path.Clean | relURL | printf "%s/" -}}
  {{- else -}}
    {{- $alias | path.Clean | printf "%s/" -}}
  {{- end }} {{ $page.RelPermalink }} 301
{{ end -}}
{{- end -}}

