{{- $parentId := .id -}}

{{- with .ctx -}}

{{- $currentPage := . -}}

<ul class="list-unstyled collapsible-sidebar">
  <li class="mb-b">
    {{ $active := and (eq .CurrentSection .FirstSection) (eq .Title "Archive") -}}
    <h3>
      <a class="docs-link {{ if $active }}active{{ end }}" href="/artifacts/">All artifacts</a>
    </h3>
  </li>

  <li class="mb-2">
    {{- $active := eq .Section "identities" -}}
    <button
      aria-controls="{{ $parentId }}-identities-menu"
      aria-expanded="{{ if $active -}}
        true
      {{- else -}}
        false
      {{- end }}"
      class="btn btn-toggle align-items-center rounded"
      data-bs-target="#{{ $parentId }}-identities-menu"
      data-bs-toggle="collapse"
    >
      Identities
    </button>
    <div class="collapse {{ if $active }}show{{ end }}" id="{{ $parentId }}-identities-menu">
      <ul class="btn-toggle-nav list-unstyled">
        {{ range .Site.Taxonomies.identities }}
          {{ $active := eq .Page.Title
            $currentPage.Title
          -}}
          <li>
            <a class="docs-link d-flex {{ if $active }}active{{ end }}" href="{{ .Page.Permalink }}"
              ><span>{{ .Page.Title | title }}</span
              ><span class="badge bg-light text-dark fw-normal ms-auto me-lg-4"
                >{{ .Count }}</span
              ></a
            >
          </li>
        {{ end }}
      </ul>
    </div>
  </li>

  <li class="mb-2">
    {{- $active := eq .Section "decades" -}}
    <button
      aria-controls="{{ $parentId }}-decades-menu"
      aria-expanded="{{ if $active -}}
        true
      {{- else -}}
        false
      {{- end }}"
      class="btn btn-toggle align-items-center rounded"
      data-bs-target="#{{ $parentId }}-decades-menu"
      data-bs-toggle="collapse"
    >
      Decades
    </button>
    <div class="collapse {{ if $active }}show{{ end }}" id="{{ $parentId }}-decades-menu">
      <ul class="btn-toggle-nav list-unstyled">
        {{ range .Site.Taxonomies.decades }}
          {{ $active := eq .Page.Title
            $currentPage.Title
          -}}
          <li>
            <a class="docs-link d-flex {{ if $active }}active{{ end }}" href="{{ .Page.Permalink }}"
              ><span>{{ .Page.Title | title }}</span
              ><span class="badge bg-light text-dark fw-normal ms-auto me-lg-4"
                >{{ .Count }}</span
              ></a
            >
          </li>
        {{ end }}
      </ul>
    </div>
  </li>

  <li class="mb-2">
    {{- $active := eq .Section "people" -}}
    <button
      aria-controls="{{ $parentId }}-people-menu"
      aria-expanded="{{ if $active -}}
        true
      {{- else -}}
        false
      {{- end }}"
      class="btn btn-toggle align-items-center rounded collapsed"
      data-bs-target="#{{ $parentId }}-people-menu"
      data-bs-toggle="collapse"
    >
      People
    </button>
    <div class="collapse {{ if $active }}show{{ end }}" id="{{ $parentId }}-people-menu">
      <ul class="btn-toggle-nav list-unstyled">
        {{ range .Site.Taxonomies.people }}
          {{ $active := eq .Page.Title
            $currentPage.Title
          -}}
          <li>
            <a class="docs-link d-flex {{ if $active }}active{{ end }}" href="{{ .Page.Permalink }}"
              ><span>{{ .Page.Title | title }}</span
              ><span class="badge bg-light text-dark fw-normal ms-auto me-lg-4"
                >{{ .Count }}</span
              ></a
            >
          </li>
        {{ end }}
      </ul>
    </div>
  </li>
</ul>
{{- end }}
